#jinja2: newline_sequence:'\\r\\n'

# This config file was automatically generated by Ansible.
# Any changes made here manually will be overwritten by Ansible the next time
# it is run.

define ROOT {{ remotelog_nxlog_root }}

Moduledir %ROOT%\modules
CacheDir %ROOT%\data
Pidfile %ROOT%\data\nxlog.pid
SpoolDir %ROOT%\data
LogFile %ROOT%\data\nxlog.log

{% for item in remotelog_nxlog_extensions %}
<Extension {{ item.name }}>
    Module      {{ item.module }}
{% if item.fields %}
    Fields      {{ item.fields }}
{% endif %}
{% if item.fieldtypes %}
    FieldTypes  {{ item.fieldtypes }}
{% endif %}
{% if item.delimiter %}
    Delimiter   {{ item.delimiter | to_json | regex_replace( '\"', '\'' ) }}
{% endif %}
</Extension>

{% endfor %}
{% for item in remotelog_nxlog_inputs %}
<Input {{ item.name }}>
    Module      {{ item.module }}
{% if item.file %}
    File	{{ item.file | to_json | regex_replace( '\"', '\'' ) }}
{% endif %}
{% if item.exec %}
    <Exec>
{% for line in item.exec %}
        {{ line }}
{% endfor %}
    </Exec>
{% endif %}
</Input>

{% endfor %}
#<Processor buffer>
    # 100MB disk buffer for disconnected state.
#    MaxSize 102400
#    Type disk
#</Processor>

{% for item in remotelog_nxlog_outputs %}
<Output {{ item.name }}>
    Module      {{ item.module }}
    Host        {{ item.host }}
    Port        {{ item.port }}
</Output>

{% endfor %}
{% for item in remotelog_nxlog_routes %}
<Route {{ item.index }}>
    Path        {{ item.path }}
</Route>

{% endfor %}
